{"version":3,"sources":["Login.js"],"names":["String","prototype","format","args","arguments","length","result","key","reg","RegExp","replace","i","undefined","cc","Class","extends","Component","properties","_mima","_mimaIndex","onLoad","vv","utils","setFitSreenMode","http","url","master_url","net","addHandler","console","log","director","loadScene","audioMgr","playBGM","sys","isNative","os","OS_WINDOWS","find","active","start","account","localStorage","getItem","sign","ret","errcode","userMgr","onAuth","onBtnQuickStartClicked","guestAuth","onBtnWeichatClicked","self","anysdkMgr","login","onBtnMIMAClicked","event","target","name"],"mappings":"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","file":"Login.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["String.prototype.format = function(args) { \r\n    if (arguments.length>0) { \r\n        var result = this; \r\n        if (arguments.length == 1 && typeof (args) == \"object\") { \r\n            for (var key in args) { \r\n                var reg=new RegExp (\"({\"+key+\"})\",\"g\"); \r\n                result = result.replace(reg, args[key]); \r\n            } \r\n        } \r\n        else { \r\n            for (var i = 0; i < arguments.length; i++) { \r\n                if(arguments[i]==undefined) { \r\n                    return \"\"; \r\n                } \r\n                else { \r\n                    var reg=new RegExp (\"({[\"+i+\"]})\",\"g\"); \r\n                    result = result.replace(reg, arguments[i]); \r\n                } \r\n            } \r\n        } \r\n        return result; \r\n    } \r\n    else { \r\n        return this; \r\n    } \r\n};\r\n \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _mima:null,\r\n        _mimaIndex:0,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        cc.vv.utils.setFitSreenMode();\r\n        cc.vv.http.url = cc.vv.http.master_url;\r\n        cc.vv.net.addHandler('push_need_create_role',function(){\r\n            console.log(\"onLoad:push_need_create_role\");\r\n            cc.director.loadScene(\"createrole\");\r\n        });\r\n        \r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n        \r\n        this._mima = [\"A\",\"A\",\"B\",\"B\",\"A\",\"B\",\"A\",\"B\",\"A\",\"A\",\"A\",\"B\",\"B\",\"B\"];\r\n        \r\n        // 判断当前是否属于web浏览器或是window平台 来显示不同的登录按钮\r\n        if(!cc.sys.isNative || cc.sys.os == cc.sys.OS_WINDOWS){\r\n            cc.find(\"Canvas/btn_yk\").active = true;\r\n        }\r\n        else{\r\n            cc.find(\"Canvas/btn_weixin\").active = true;\r\n        }\r\n    },\r\n    \r\n    start:function(){\r\n        var account =  cc.sys.localStorage.getItem(\"wx_account\");\r\n        var sign = cc.sys.localStorage.getItem(\"wx_sign\");\r\n        if(account != null && sign != null && account != '' && sign != ''){\r\n            var ret = {\r\n                errcode:0,\r\n                account:account,\r\n                sign:sign\r\n            }\r\n            cc.vv.userMgr.onAuth(ret);\r\n        }   \r\n    },\r\n    \r\n    // 游客登录点击函数\r\n    onBtnQuickStartClicked:function(){\r\n        cc.vv.userMgr.guestAuth();\r\n    },\r\n    \r\n    // 微信登录点击函数\r\n    onBtnWeichatClicked:function(){\r\n        var self = this;\r\n        cc.vv.anysdkMgr.login();\r\n    },\r\n    \r\n    onBtnMIMAClicked:function(event){\r\n        if(this._mima[this._mimaIndex] == event.target.name){\r\n            this._mimaIndex++;\r\n            if(this._mimaIndex == this._mima.length){\r\n                cc.find(\"Canvas/btn_yk\").active = true;\r\n            }\r\n        }\r\n        else{\r\n            console.log(\"oh ho~~~\");\r\n            this._mimaIndex = 0;\r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}