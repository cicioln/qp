{"version":3,"sources":["GameOver.js"],"names":["cc","Class","extends","Component","properties","_gameover","_gameresult","_seats","_isGameEnd","_pingju","_win","_lose","onLoad","vv","gameNetMgr","conf","type","node","getChildByName","active","wanfa","getComponent","Label","string","getWanfa","listRoot","i","s","sn","viewdata","username","reason","f","fan","score","hu","mahjongs","zhuang","hupai","_pengandgang","push","self","on","data","onGameOver","onGameOver_XZDD","onGameOver_XLCH","console","log","length","myscore","seatIndex","seatView","userData","hued","numOfGangs","angangs","wangangs","diangangs","numOfGen","numofgen","actionArr","is7pairs","ischadajiao","j","actions","ac","pattern","qingyise","menqing","zhongzhang","jingouhu","haidihu","tianhu","dihu","o","children","huorder","seats","name","button","join","holds","pop","mahjongmgr","sortMJ","dingque","k","childrenCount","n","lackingNum","pengs","pai","sprite","Sprite","spriteFrame","getSpriteFrameByMJID","index","gangs","mjid","initPengAndGangs","hupaiRoot","hi","huinfo","info","ishupai","hupaiView","str","sep","dataseat","action","target","flag","pgroot","instantiate","pengPrefabSelf","addChild","sprites","getComponentsInChildren","isGang","scaleX","scaleY","getEmptySpriteFrame","x","onBtnReadyClicked","net","send","onBtnShareClicked"],"mappings":"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","file":"GameOver.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _gameover:null,\r\n        _gameresult:null,\r\n        _seats:[],\r\n        _isGameEnd:false,\r\n        _pingju:null,\r\n        _win:null,\r\n        _lose:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        if(cc.vv.gameNetMgr.conf == null){\r\n            return;\r\n        }\r\n        if(cc.vv.gameNetMgr.conf.type == \"xzdd\"){\r\n            this._gameover = this.node.getChildByName(\"game_over\");\r\n        }\r\n        else{\r\n            this._gameover = this.node.getChildByName(\"game_over_xlch\");\r\n        }\r\n        \r\n        this._gameover.active = false;\r\n        \r\n        this._pingju = this._gameover.getChildByName(\"pingju\");\r\n        this._win = this._gameover.getChildByName(\"win\");\r\n        this._lose = this._gameover.getChildByName(\"lose\");\r\n        \r\n        this._gameresult = this.node.getChildByName(\"game_result\");\r\n        \r\n        var wanfa = this._gameover.getChildByName(\"wanfa\").getComponent(cc.Label);\r\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\r\n        \r\n        var listRoot = this._gameover.getChildByName(\"result_list\");\r\n        for(var i = 1; i <= 4; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = listRoot.getChildByName(s);\r\n            var viewdata = {};\r\n            viewdata.username = sn.getChildByName('username').getComponent(cc.Label);\r\n            viewdata.reason = sn.getChildByName('reason').getComponent(cc.Label);\r\n            \r\n            var f = sn.getChildByName('fan');\r\n            if(f != null){\r\n                viewdata.fan = f.getComponent(cc.Label);    \r\n            }\r\n            \r\n            viewdata.score = sn.getChildByName('score').getComponent(cc.Label);\r\n            viewdata.hu = sn.getChildByName('hu');\r\n            viewdata.mahjongs = sn.getChildByName('pai');\r\n            viewdata.zhuang = sn.getChildByName('zhuang');\r\n            viewdata.hupai = sn.getChildByName('hupai');\r\n            viewdata._pengandgang = [];\r\n            this._seats.push(viewdata);\r\n        }\r\n        \r\n        //初始化网络事件监听器\r\n        var self = this;\r\n        this.node.on('game_over',function(data){self.onGameOver(data);});\r\n        \r\n        this.node.on('game_end',function(data){self._isGameEnd = true;});\r\n    },\r\n    \r\n    onGameOver(data){\r\n        if(cc.vv.gameNetMgr.conf.type == \"xzdd\"){\r\n            this.onGameOver_XZDD(data);\r\n        }\r\n        else{\r\n            this.onGameOver_XLCH(data);\r\n        }\r\n    },\r\n    \r\n    onGameOver_XZDD(data){\r\n        console.log(data);\r\n        if(data.length == 0){\r\n            this._gameresult.active = true;\r\n            return;\r\n        }\r\n        this._gameover.active = true;\r\n        this._pingju.active = false;\r\n        this._win.active = false;\r\n        this._lose.active = false;\r\n\r\n        var myscore = data[cc.vv.gameNetMgr.seatIndex].score;\r\n        if(myscore > 0){\r\n            this._win.active = true;\r\n        }         \r\n        else if(myscore < 0){\r\n            this._lose.active = true;\r\n        }\r\n        else{\r\n            this._pingju.active = true;\r\n        }\r\n        \r\n            \r\n        //显示玩家信息\r\n        for(var i = 0; i < 4; ++i){\r\n            var seatView = this._seats[i];\r\n            var userData = data[i];\r\n            var hued = false;\r\n            //胡牌的玩家才显示 是否清一色 根xn的字样\r\n            var numOfGangs = userData.angangs.length + userData.wangangs.length + userData.diangangs.length;\r\n            var numOfGen = userData.numofgen;\r\n            var actionArr = [];\r\n            var is7pairs = false;\r\n            var ischadajiao = false;\r\n            for(var j = 0; j < userData.actions.length; ++j){\r\n                var ac = userData.actions[j];\r\n                if(ac.type == \"zimo\" || ac.type == \"ganghua\" || ac.type == \"dianganghua\" || ac.type == \"hu\" || ac.type == \"gangpaohu\" || ac.type == \"qiangganghu\" || ac.type == \"chadajiao\"){\r\n                    if(userData.pattern == \"7pairs\"){\r\n                        actionArr.push(\"七对\");\r\n                    }\r\n                    else if(userData.pattern == \"l7pairs\"){\r\n                        actionArr.push(\"龙七对\");\r\n                    }\r\n                    else if(userData.pattern == \"j7pairs\"){\r\n                        actionArr.push(\"将七对\");\r\n                    }\r\n                    else if(userData.pattern == \"duidui\"){\r\n                        actionArr.push(\"碰碰胡\");\r\n                    }\r\n                    else if(userData.pattern == \"jiangdui\"){\r\n                        actionArr.push(\"将对\");\r\n                    }\r\n                    \r\n                    if(ac.type == \"zimo\"){\r\n                        actionArr.push(\"自摸\");\r\n                    }\r\n                    else if(ac.type == \"ganghua\"){\r\n                        actionArr.push(\"杠上花\");\r\n                    }\r\n                    else if(ac.type == \"dianganghua\"){\r\n                        actionArr.push(\"点杠花\");\r\n                    }\r\n                    else if(ac.type == \"gangpaohu\"){\r\n                        actionArr.push(\"杠炮胡\");\r\n                    }\r\n                    else if(ac.type == \"qiangganghu\"){\r\n                        actionArr.push(\"抢杠胡\");\r\n                    }\r\n                    else if(ac.type == \"chadajiao\"){\r\n                        ischadajiao = true;\r\n                    }\r\n                    hued = true;\r\n                }\r\n                else if(ac.type == \"fangpao\"){\r\n                    actionArr.push(\"放炮\");\r\n                }\r\n                else if(ac.type == \"angang\"){\r\n                    actionArr.push(\"暗杠\");\r\n                }\r\n                else if(ac.type == \"diangang\"){\r\n                    actionArr.push(\"明杠\");\r\n                }\r\n                else if(ac.type == \"wangang\"){\r\n                    actionArr.push(\"弯杠\");\r\n                }\r\n                else if(ac.type == \"fanggang\"){\r\n                   actionArr.push(\"放杠\");\r\n                }\r\n                else if(ac.type == \"zhuanshougang\"){\r\n                    actionArr.push(\"转手杠\");\r\n                }\r\n                else if(ac.type == \"beiqianggang\"){\r\n                    actionArr.push(\"被抢杠\");\r\n                }\r\n                else if(ac.type == \"beichadajiao\"){\r\n                    actionArr.push(\"被查叫\");\r\n                }\r\n            }\r\n            \r\n            if(hued){\r\n                if(userData.qingyise){\r\n                    actionArr.push(\"清一色\");\r\n                }\r\n                \r\n                if(userData.menqing){\r\n                    actionArr.push(\"门清\");\r\n                }\r\n                \r\n                if(userData.zhongzhang){\r\n                    actionArr.push(\"中张\");\r\n                }\r\n                \r\n                if(userData.jingouhu){\r\n                    actionArr.push(\"金钩胡\");\r\n                }\r\n                                \r\n                if(userData.haidihu){\r\n                    actionArr.push(\"海底胡\");\r\n                }\r\n                \r\n                if(userData.tianhu){\r\n                    actionArr.push(\"天胡\");\r\n                }\r\n                \r\n                if(userData.dihu){\r\n                    actionArr.push(\"地胡\");\r\n                }\r\n            \r\n                if(numOfGen > 0){\r\n                    actionArr.push(\"根x\" + numOfGen); \r\n                }                \r\n                \r\n                if(ischadajiao){\r\n                    actionArr.push(\"查大叫\");\r\n                }\r\n            }\r\n            \r\n            for(var o = 0; o < 3;++o){\r\n                seatView.hu.children[o].active = false;    \r\n            }\r\n            if(userData.huorder >= 0){\r\n                seatView.hu.children[userData.huorder].active = true;    \r\n            }\r\n\r\n            seatView.username.string = cc.vv.gameNetMgr.seats[i].name;\r\n            seatView.zhuang.active = cc.vv.gameNetMgr.button == i;\r\n            seatView.reason.string = actionArr.join(\"、\");\r\n            \r\n            //胡牌的玩家才有番\r\n            var fan = 0;\r\n            if(hued){\r\n                fan = userData.fan;\r\n            }\r\n            seatView.fan.string = fan + \"番\";\r\n            \r\n            //\r\n            if(userData.score > 0){\r\n                seatView.score.string = \"+\" + userData.score;    \r\n            }\r\n            else{\r\n                seatView.score.string = userData.score;\r\n            }\r\n           \r\n            \r\n            var hupai = -1;\r\n            if(hued){\r\n                hupai = userData.holds.pop();\r\n            }\r\n            \r\n            cc.vv.mahjongmgr.sortMJ(userData.holds,userData.dingque);\r\n            \r\n            //胡牌不参与排序\r\n            if(hued){\r\n                userData.holds.push(hupai);\r\n            }\r\n            \r\n            //隐藏所有牌\r\n            for(var k = 0; k < seatView.mahjongs.childrenCount; ++k){\r\n                var n = seatView.mahjongs.children[k];\r\n                n.active = false;\r\n            }\r\n           \r\n            var lackingNum = (userData.pengs.length + numOfGangs)*3; \r\n            //显示相关的牌\r\n            for(var k = 0; k < userData.holds.length; ++k){\r\n                var pai = userData.holds[k];\r\n                var n = seatView.mahjongs.children[k + lackingNum];\r\n                n.active = true;\r\n                var sprite = n.getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            }\r\n            \r\n            \r\n            for(var k = 0; k < seatView._pengandgang.length; ++k){\r\n                seatView._pengandgang[k].active = false;\r\n            }\r\n            \r\n            //初始化杠牌\r\n            var index = 0;\r\n            var gangs = userData.angangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"angang\");\r\n                index++;    \r\n            }\r\n            \r\n            var gangs = userData.diangangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"diangang\");\r\n                index++;    \r\n            }\r\n            \r\n            var gangs = userData.wangangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"wangang\");\r\n                index++;    \r\n            }\r\n            \r\n            //初始化碰牌\r\n            var pengs = userData.pengs\r\n            if(pengs){\r\n                for(var k = 0; k < pengs.length; ++k){\r\n                    var mjid = pengs[k];\r\n                    this.initPengAndGangs(seatView,index,mjid,\"peng\");\r\n                    index++;    \r\n                }    \r\n            }\r\n        }\r\n    },\r\n    onGameOver_XLCH:function(data){\r\n        console.log(data);\r\n        if(data.length == 0){\r\n            this._gameresult.active = true;\r\n            return;\r\n        }\r\n        this._gameover.active = true;\r\n        this._pingju.active = false;\r\n        this._win.active = false;\r\n        this._lose.active = false;\r\n\r\n        var myscore = data[cc.vv.gameNetMgr.seatIndex].score;\r\n        if(myscore > 0){\r\n            this._win.active = true;\r\n        }         \r\n        else if(myscore < 0){\r\n            this._lose.active = true;\r\n        }\r\n        else{\r\n            this._pingju.active = true;\r\n        }\r\n            \r\n        //显示玩家信息\r\n        for(var i = 0; i < 4; ++i){\r\n            var seatView = this._seats[i];\r\n            var userData = data[i];\r\n            var hued = false;\r\n            var actionArr = [];\r\n            var is7pairs = false;\r\n            var ischadajiao = false;\r\n            var hupaiRoot = seatView.hupai;\r\n            \r\n            for(var j = 0; j < hupaiRoot.children.length; ++j){\r\n                hupaiRoot.children[j].active = false;\r\n            }\r\n            \r\n            var hi = 0;\r\n            for(var j = 0; j < userData.huinfo.length; ++j){\r\n                var info = userData.huinfo[j];\r\n                hued = hued || info.ishupai;\r\n                if(info.ishupai){\r\n                    if(hi < hupaiRoot.children.length){\r\n                        var hupaiView = hupaiRoot.children[hi]; \r\n                        hupaiView.active = true;\r\n                        hupaiView.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",info.pai);\r\n                        hi++;   \r\n                    }\r\n                }\r\n                \r\n                var str = \"\"\r\n                var sep = \"\";\r\n                \r\n                var dataseat = userData;\r\n                if(!info.ishupai){\r\n                    if(info.action == \"fangpao\"){\r\n                        str = \"放炮\";\r\n                    }\r\n                    else if(info.action == \"gangpao\"){\r\n                        str = \"杠上炮\";\r\n                    }\r\n                    else if(info.action == \"beiqianggang\"){\r\n                        str = \"被抢杠\";\r\n                    }\r\n                    else{\r\n                        str = \"被查大叫\";\r\n                    }\r\n                    \r\n                    dataseat = data[info.target]; \r\n                    info = dataseat.huinfo[info.index];\r\n                }\r\n                else{\r\n                    if(info.action == \"hu\"){\r\n                        str = \"接炮胡\"\r\n                    }\r\n                    else if(info.action == \"zimo\"){\r\n                        str = \"自摸\";\r\n                    }\r\n                    else if(info.action == \"ganghua\"){\r\n                        str = \"杠上花\";\r\n                    }\r\n                    else if(info.action == \"dianganghua\"){\r\n                        str = \"点杠花\";\r\n                    }\r\n                    else if(info.action == \"gangpaohu\"){\r\n                        str = \"杠炮胡\";\r\n                    }\r\n                    else if(info.action == \"qiangganghu\"){\r\n                        str = \"抢杠胡\";\r\n                    }\r\n                    else if(info.action == \"chadajiao\"){\r\n                        str = \"查大叫\";\r\n                    }   \r\n                }\r\n                \r\n                str += \"(\";\r\n                \r\n                if(info.pattern == \"7pairs\"){\r\n                    str += \"七对\";\r\n                    sep = \"、\"\r\n                }\r\n                else if(info.pattern == \"l7pairs\"){\r\n                    str += \"龙七对\";\r\n                    sep = \"、\"\r\n                }\r\n                else if(info.pattern == \"j7pairs\"){\r\n                    str += \"将七对\";\r\n                    sep = \"、\"\r\n                }\r\n                else if(info.pattern == \"duidui\"){\r\n                    str += \"碰碰胡\";\r\n                    sep = \"、\"\r\n                }\r\n                else if(info.pattern == \"jiangdui\"){\r\n                    str += \"将对\";\r\n                    sep = \"、\"\r\n                }\r\n                    \r\n                if(info.haidihu){\r\n                    str += sep + \"海底胡\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(info.tianhu){\r\n                    str += sep + \"天胡\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(info.dihu){\r\n                    str += sep + \"地胡\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(dataseat.qingyise){\r\n                    str += sep + \"清一色\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(dataseat.menqing){\r\n                    str += sep + \"门清\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(dataseat.jingouhu){\r\n                    str += sep + \"金钩胡\";\r\n                    sep = \"、\";\r\n                }\r\n                         \r\n                if(dataseat.zhongzhang){\r\n                    str += sep + \"中张\";\r\n                    sep = \"、\";\r\n                }\r\n            \r\n                if(info.numofgen > 0){\r\n                    str += sep + \"根x\" + info.numofgen;\r\n                    sep = \"、\"; \r\n                }\r\n                \r\n                if(sep == \"\"){\r\n                    str += \"平胡\";\r\n                }\r\n                \r\n                str += \"、\" + info.fan + \"番\";\r\n                \r\n                str += \")\";\r\n                actionArr.push(str);\r\n            }\r\n            \r\n            seatView.hu.active = hued;\r\n            \r\n            if(userData.angangs.length){\r\n                actionArr.push(\"暗杠x\" + userData.angangs.length);\r\n            }\r\n            \r\n            if(userData.diangangs.length){\r\n                actionArr.push(\"明杠x\" + userData.diangangs.length);\r\n            }\r\n            \r\n            if(userData.wangangs.length){\r\n                actionArr.push(\"巴杠x\" + userData.wangangs.length);\r\n            }\r\n\r\n            seatView.username.string = cc.vv.gameNetMgr.seats[i].name;\r\n            seatView.zhuang.active = cc.vv.gameNetMgr.button == i;\r\n            seatView.reason.string = actionArr.join(\"、\");\r\n            \r\n            //\r\n            if(userData.score > 0){\r\n                seatView.score.string = \"+\" + userData.score;    \r\n            }\r\n            else{\r\n                seatView.score.string = userData.score;\r\n            }\r\n           \r\n            //隐藏所有牌\r\n            for(var k = 0; k < seatView.mahjongs.childrenCount; ++k){\r\n                var n = seatView.mahjongs.children[k];\r\n                n.active = false;\r\n            }\r\n            \r\n            cc.vv.mahjongmgr.sortMJ(userData.holds,userData.dingque);\r\n            \r\n            var numOfGangs = userData.angangs.length + userData.wangangs.length + userData.diangangs.length;\r\n           \r\n            var lackingNum = (userData.pengs.length + numOfGangs)*3; \r\n            //显示相关的牌\r\n            for(var k = 0; k < userData.holds.length; ++k){\r\n                var pai = userData.holds[k];\r\n                var n = seatView.mahjongs.children[k + lackingNum];\r\n                n.active = true;\r\n                var sprite = n.getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            }\r\n            \r\n            \r\n            for(var k = 0; k < seatView._pengandgang.length; ++k){\r\n                seatView._pengandgang[k].active = false;\r\n            }\r\n            \r\n            //初始化杠牌\r\n            var index = 0;\r\n            var gangs = userData.angangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"angang\");\r\n                index++;    \r\n            }\r\n            \r\n            var gangs = userData.diangangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"diangang\");\r\n                index++;    \r\n            }\r\n            \r\n            var gangs = userData.wangangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"wangang\");\r\n                index++;    \r\n            }\r\n            \r\n            //初始化碰牌\r\n            var pengs = userData.pengs\r\n            if(pengs){\r\n                for(var k = 0; k < pengs.length; ++k){\r\n                    var mjid = pengs[k];\r\n                    this.initPengAndGangs(seatView,index,mjid,\"peng\");\r\n                    index++;    \r\n                }    \r\n            }\r\n        }\r\n    },\r\n    \r\n    initPengAndGangs:function(seatView,index,mjid,flag){\r\n        var pgroot = null;\r\n        if(seatView._pengandgang.length <= index){\r\n            pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\r\n            seatView._pengandgang.push(pgroot);\r\n            seatView.mahjongs.addChild(pgroot);    \r\n        }\r\n        else{\r\n            pgroot = seatView._pengandgang[index];\r\n            pgroot.active = true;\r\n        }\r\n      \r\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\r\n        for(var s = 0; s < sprites.length; ++s){\r\n            var sprite = sprites[s];\r\n            if(sprite.node.name == \"gang\"){\r\n                var isGang = flag != \"peng\";\r\n                sprite.node.active = isGang;\r\n                sprite.node.scaleX = 1.0;\r\n                sprite.node.scaleY = 1.0;\r\n                if(flag == \"angang\"){\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(\"myself\");\r\n                    sprite.node.scaleX = 1.4;\r\n                    sprite.node.scaleY = 1.4;                        \r\n                }   \r\n                else{\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",mjid);    \r\n                }\r\n            }\r\n            else{ \r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",mjid);\r\n            }\r\n        }\r\n        pgroot.x = index * 55 * 3 + index * 10;\r\n    },\r\n    \r\n    onBtnReadyClicked:function(){\r\n        console.log(\"onBtnReadyClicked\");\r\n        if(this._isGameEnd){\r\n            this._gameresult.active = true;\r\n        }\r\n        else{\r\n            cc.vv.net.send('ready');   \r\n        }\r\n        this._gameover.active = false;\r\n    },\r\n    \r\n    onBtnShareClicked:function(){\r\n        console.log(\"onBtnShareClicked\");\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}