{"version":3,"sources":["Hall.js"],"names":["Net","require","Global","cc","Class","extends","Component","properties","lblName","Label","lblMoney","lblGems","lblID","lblNotice","joinGameWin","Node","createRoomWin","settingsWin","helpWin","xiaoxiWin","btnJoinGame","btnReturnGame","sprHeadImg","Sprite","initNetHandlers","self","onShare","vv","anysdkMgr","share","onLoad","utils","setFitSreenMode","initLabels","gameNetMgr","roomId","active","userMgr","oldRoomId","enterRoom","imgLoader","node","getComponent","setUserID","userId","addClickEvent","addComponent","initButtonHandler","notice","version","msg","gemstip","string","refreshInfo","refreshNotice","refreshGemsTip","audioMgr","playBGM","addEscEvent","onGet","ret","errcode","console","log","errmsg","gems","data","account","sign","http","sendRequest","bind","replace","type","btnPath","btn","find","userName","coins","onBtnClicked","event","target","name","userinfoShow","show","sex","ip","onJoinGameClicked","onReturnGameClicked","wc","director","loadScene","onBtnAddGemsClicked","alert","onBtnTaobaoClicked","onCreateRoomClicked","sys","openURL","update","dt","x","width","roomData"],"mappings":"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","file":"Hall.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["var Net = require(\"Net\")\r\nvar Global = require(\"Global\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lblName:cc.Label, // 玩家名称\r\n        lblMoney:cc.Label, // 钱\r\n        lblGems:cc.Label, // 房卡\r\n        lblID:cc.Label, // 玩家id\r\n        lblNotice:cc.Label,\r\n        joinGameWin:cc.Node,\r\n        createRoomWin:cc.Node,\r\n        settingsWin:cc.Node,\r\n        helpWin:cc.Node,\r\n        xiaoxiWin:cc.Node,\r\n        btnJoinGame:cc.Node, // 加入房间按钮\r\n        btnReturnGame:cc.Node, // 返回房间按钮\r\n        sprHeadImg:cc.Sprite,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    \r\n    initNetHandlers:function(){\r\n        var self = this;\r\n    },\r\n    \r\n    onShare:function(){\r\n        cc.vv.anysdkMgr.share(\"天天麻将\",\"天天麻将，包含了血战到底、血流成河等多种四川流行麻将玩法。\");   \r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        cc.vv.utils.setFitSreenMode();\r\n        this.initLabels();\r\n        \r\n        // 判断用户是否还有正在进行游戏的房间\r\n        if(cc.vv.gameNetMgr.roomId == null){\r\n            this.btnJoinGame.active = true;\r\n            this.btnReturnGame.active = false;\r\n        }\r\n        else{\r\n            this.btnJoinGame.active = false;\r\n            this.btnReturnGame.active = true;\r\n        }\r\n        \r\n        var roomId = cc.vv.userMgr.oldRoomId \r\n        if( roomId != null){\r\n            cc.vv.userMgr.oldRoomId = null;\r\n            cc.vv.userMgr.enterRoom(roomId);\r\n        }\r\n        \r\n        var imgLoader = this.sprHeadImg.node.getComponent(\"ImageLoader\"); // 每个节点中的组件上都有.node方法可以获取当前组件的节点\r\n        imgLoader.setUserID(cc.vv.userMgr.userId); // 设置大厅头像用户信息\r\n        cc.vv.utils.addClickEvent(this.sprHeadImg.node,this.node,\"Hall\",\"onBtnClicked\"); // 给当前用户头像添加点击事件\r\n        \r\n        \r\n        this.addComponent(\"UserInfoShow\"); // 添加用户信息显示脚本组件(cocos会默认从scripts目录下查找所有的匹配脚本)\r\n        \r\n        // 初始化大厅右上角按钮点击事件等\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_shezhi\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_help\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_xiaoxi\");\r\n        this.helpWin.addComponent(\"OnBack\");\r\n        this.xiaoxiWin.addComponent(\"OnBack\");\r\n        \r\n        if(!cc.vv.userMgr.notice){\r\n            cc.vv.userMgr.notice = {\r\n                version:null,\r\n                msg:\"数据请求中...\",\r\n            }\r\n        }\r\n        \r\n        if(!cc.vv.userMgr.gemstip){\r\n            cc.vv.userMgr.gemstip = {\r\n                version:null,\r\n                msg:\"数据请求中...\",\r\n            }\r\n        }\r\n        \r\n        this.lblNotice.string = cc.vv.userMgr.notice.msg;\r\n        \r\n        // 获取大厅房卡、提示信息、公共数据等\r\n        this.refreshInfo();\r\n        this.refreshNotice();\r\n        this.refreshGemsTip();\r\n        \r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n\r\n        cc.vv.utils.addEscEvent(this.node);\r\n    },\r\n    \r\n    refreshInfo:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                if(ret.gems != null){\r\n                    this.lblGems.string = ret.gems;    \r\n                }\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_user_status\",data,onGet.bind(this));\r\n    },\r\n    \r\n    refreshGemsTip:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.gemstip.version = ret.version;\r\n                cc.vv.userMgr.gemstip.msg = ret.msg.replace(\"<newline>\",\"\\n\");\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"fkgm\",\r\n            version:cc.vv.userMgr.gemstip.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n    \r\n    refreshNotice:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.notice.version = ret.version;\r\n                cc.vv.userMgr.notice.msg = ret.msg;\r\n                this.lblNotice.string = ret.msg;\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"notice\",\r\n            version:cc.vv.userMgr.notice.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n    \r\n    initButtonHandler:function(btnPath){\r\n        var btn = cc.find(btnPath);\r\n        cc.vv.utils.addClickEvent(btn,this.node,\"Hall\",\"onBtnClicked\");        \r\n    },\r\n    \r\n    \r\n    \r\n    initLabels:function(){\r\n        this.lblName.string = cc.vv.userMgr.userName;\r\n        this.lblMoney.string = cc.vv.userMgr.coins;\r\n        this.lblGems.string = cc.vv.userMgr.gems;\r\n        this.lblID.string = \"ID:\" + cc.vv.userMgr.userId;\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        // event.target.name事件触发来源的组件名\r\n        if(event.target.name == \"btn_shezhi\"){\r\n            this.settingsWin.active = true;\r\n        }   \r\n        else if(event.target.name == \"btn_help\"){\r\n            this.helpWin.active = true;\r\n        }\r\n        else if(event.target.name == \"btn_xiaoxi\"){\r\n            this.xiaoxiWin.active = true;\r\n        }\r\n        else if(event.target.name == \"head\"){\r\n            // 显示用户信息界面\r\n            cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.ip);\r\n        }\r\n    },\r\n    \r\n    onJoinGameClicked:function(){\r\n        this.joinGameWin.active = true;\r\n    },\r\n    \r\n    onReturnGameClicked:function(){\r\n        cc.vv.wc.show('正在返回游戏房间');\r\n        cc.director.loadScene(\"mjgame\");  \r\n    },\r\n    \r\n    onBtnAddGemsClicked:function(){\r\n        cc.vv.alert.show(\"提示\",cc.vv.userMgr.gemstip.msg,function(){\r\n            this.onBtnTaobaoClicked();\r\n        }.bind(this));\r\n        this.refreshInfo();\r\n    },\r\n    \r\n    // 创建房间\r\n    onCreateRoomClicked:function(){\r\n        // 判断当前用户是否有正在进行游戏的房间\r\n        if(cc.vv.gameNetMgr.roomId != null){\r\n            cc.vv.alert.show(\"提示\",\"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\r\n            return;\r\n        }\r\n        console.log(\"onCreateRoomClicked\");\r\n        this.createRoomWin.active = true;   \r\n    },\r\n    \r\n    onBtnTaobaoClicked:function(){\r\n        cc.sys.openURL('https://shop596732896.taobao.com/');\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        var x = this.lblNotice.node.x;\r\n        x -= dt*100;\r\n        if(x + this.lblNotice.node.width < -1000){\r\n            x = 500;\r\n        }\r\n        this.lblNotice.node.x = x;\r\n        \r\n        if(cc.vv && cc.vv.userMgr.roomData != null){\r\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\r\n            cc.vv.userMgr.roomData = null;\r\n        }\r\n    },\r\n});\r\n"]}